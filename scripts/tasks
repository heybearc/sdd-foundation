#!/usr/bin/env bash
# Derive tasks.md from implementation-plan headings; optionally open issues.
set -euo pipefail
DIR="$(git branch --show-current | sed 's/^/specs\//')"
PLAN="${DIR}/implementation-plan.md"
OUT="${DIR}/tasks.md"
[ -f "$PLAN" ] || { echo "Plan not found: $PLAN"; exit 1; }
echo "# Tasks" > "$OUT"
grep -E '^## ' "$PLAN" | sed 's/^## /- [ ] /' >> "$OUT"
echo "Wrote $OUT"
